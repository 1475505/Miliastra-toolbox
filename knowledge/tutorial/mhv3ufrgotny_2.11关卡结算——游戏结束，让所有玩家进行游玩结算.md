---
id: mhv3ufrgotny
title: 2.11关卡结算——游戏结束，让所有玩家进行游玩结算
url: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhv3ufrgotny
sourceURL: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhv3ufrgotny
description: undefined
language: zh
scope: tutorial
crawledAt: 2025-10-30T19:51:55.540Z
---

# 前言

## 课程说明：

**课程内容：** 关卡结算流程的制作

**学习目标：** 了解在游戏设计过程中，如何设置完整的结算条件与结算流程。通过特定事件触发结算判断，结合获胜条件，制作例如：击败BOSS后获胜、进入领奖台获胜、打败其余全部玩家获胜、获得xxx金币获胜等功能（可在触发事件后自由编写，教程中不一一列举）

_\*\*该课程中涉及【局内编辑器面板配置】和【千星沙箱节点图】两个模块内容，并且相互关联，阅读时建议按照课程顺序完整阅读_

## 相关信息：

**推荐学习顺序：**【前置课程】→【当前课程】→【综合指南】

_\*\*如课程中遇到概念不清等问题或想要了解更多相关信息，根据需要查询_ **_【综合指南】_** _即可_

**前置课程：** 该课程与以下前置课程所讲述的功能知识点相关 _（建议首次使用时，优先学习_ **_【前置课程】_**_，学习体验更流畅）_

> [1.2.1【基础功能课】碰撞与交互——触发一个事件](https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhumsn9uap96)

**关联知识点：** 课程中将涉及以下基础概念 _（建议优先根据该课程学习即可，如遇到概念不清等问题或想要了解更多相关信息，再根据需要查阅_ **_【综合指南】_** _相关章节）_

> [关卡结算](https://act.mihoyo.com/ys/ugc/tutorial//detail/mhx1du08nhwo)

* * *

# 关卡结算——游戏结束，进行全局结算

## 功能示例-1：交互不同选项卡后触发不同的关卡结算

### 1.概念简述

**关卡结算：** 整体游戏流程的最后一步，代表玩家完成该局游戏（也可以根据需要进行中途结算等），并根据游玩结果获得胜利、失败等结算结果。

_\*\*关卡结算是一个预封装的节点，可根据实际结算操作、结算条件灵活配置使用。_

### 2.教学内容

**功能效果：** 玩家交互选项卡后，进行关卡结算，根据不同选项触发不同结算（以下以成功结算、失败结算分别演示）

**效果演示：**

成功结算

_\*\*演示中的文本显示，需达到Lv.3后解锁【自定义文本外显】功能，教程中以效果展示为主_

失败结算

### 3.操作步骤

**1.【局内编辑器】制作结算触发物件**

创建一个元件作为结算操作的物件（教程以元素火炬为例），在面板中点击>>>进入组件页，点击>>>选择【选项卡】即可添加

**2.【局内编辑器】配置面板参数**

添加选项卡后可对选项卡列表、选项触发区域进行调整，为达到预期的功能效果教程中配置如下：

|     |     |
| --- | --- |
| 要做的功能 | 对应的配置项 |
| 设置两个选项卡，用于触发不同的结算结果 | 【选项卡】分别设置为“成功结算”、“失败结算”<br>_\*\*名称不影响其效果，记住选项卡“序号”即可_ |
| 触发区域稍微大一些 | 【触发选项区域】调整缩放倍率 |

**3.【千星沙箱】节点图配置**

在实体节点图中，添加并配置该元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**_\*\*该节点图挂载在【结算操作元件】上_**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家对结算操作元件交互后，检测交互项，执行不同结果的结算 | 触发场景 | 选择选项卡后，触发事件 | 【事件节点】：选项卡选中时 |
| 条件-1 | 根据不同的操作，执行不同的效果 | 【流程控制节点】：使用多分支对“选项序号”进行判断<br>_\*\*该教程中，选项序号分别对应：_<br>_序号1-成功结算_<br>_序号2-失败结算_ |
| 结果-1 | 根据不同的操作，设定玩家结算状态 | 【执行节点】：使用【设置玩家结算成功状态】，调整玩家的结算状态分别为“成功”、“失败” |
| 结果-2 | 结算关卡 | 【执行节点】：使用【结算关卡】进行游戏结算<br>_\*\*结算关卡后会立即结束游戏，通常都是作为流程中的最后一个节点_ |

**4.【局内编辑器】挂载节点图**

将配置的节点图挂载在该元件上，保存元件设置

**5.【局内编辑器】放置元件，试玩体验**

将制作好的元件放置在场景中，进入试玩即可体验该功能

_\*\*演示中的文本显示，需达到Lv.3后解锁【自定义文本外显】功能，教程中以效果展示为主_

# 拓展应用

该模块仅作为教学课程所能拓展应用的功能简述，涉及到多模块联动，以操作步骤演示为主，了解进阶用法即可

## 功能示例-2：玩家拾取特定物体后，引导玩家可进行关卡结算

**功能说明：** 开箱获取特定通关道具后，引导玩家当前可进行关卡结算，交互后检测是否有通关道具，有则进行结算。

_\*\*对于关卡结算的使用相对容易，__更重要的如何引导玩家获取关键道具并正确进行关卡结算__，以下将通过特效、气泡、界面空间（UI）的组合运用进行演示。_

**效果演示：**

**实现步骤：**

**1.【局内编辑器】制作交互物-宝箱，交互后获得通关道具**

创建一个元件作为交互物（教程中以宝箱为例），添加【选项卡组件】，并配置合适的选项文本与触发选项区域大小

**2.【局内编辑器】制作交互物宝箱的提示引导信息**

在宝箱的【特效播放组件】中添加循环特效，作为引导玩家与宝箱交互的指引，教程中以【箭头特效为例】，配置参数见下

**3.【局内编辑器】制作玩家自定义变量，用于通关条件判断与界面控件（UI）信息展示**

给【玩家】添加1个自定义变量，用作判断能否通关的条件，设置参数如下：

_变量名称：是否有钥匙_

_变量类型：布尔值_

_初始值：否_

**4.【局内编辑器】制作UI提示信息**

制作界面控件（UI）作为是否有钥匙的提示信息，保存并添加进界面布局中

文本框内容为：当前是否有钥匙：【玩家自身变量-是否有钥匙】

_\*\*通过插入变量→玩家自身-是否有钥匙实现_

**5.【局内编辑器】制作交互物-通关机关**

制作一个元件作为通关交互物（教程中以元素火炬为例），添加【选项卡组件】，并配置合适的选项文本与触发选项区域大小

**6.【局内编辑器】制作通关机关的引导效果**

给通关交互物添加【文本气泡组件】，用于指引玩家进行交互结算，并配置合适的文本与位置

_\*\*为了引导玩家在获取道具后才可以进行交互，设置文本气泡初始不显示_

**7.【千星沙箱】交互物-宝箱节点图配置**

在实体节点图中，添加并配置元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**_\*\*该节点图挂载在【交互物-宝箱】上_**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家交互宝箱后，获得钥匙，并提示引导可以进行通关机关交互 | 触发场景 | 选择选项卡后，触发事件 | 【事件节点】：选项卡选中时 |
| 条件 | / | / |
| 结果-1 | 宝箱不可以重复交互 | 【执行节点】：使用【激活/关闭选项卡】，关闭选项 |
| 结果-2 | 宝箱打开 | 【执行节点】：使用【设置预设状态】制作宝箱打开的状态效果 |
| 结果-3 | 关闭宝箱的特效引导提示 | 【执行节点】：使用【根据特效资产清除特效】关闭特效 |
| 结果-4 | 玩家获得通关道具 | 【执行节点】：使用【设置自定义变量】改变交互的玩家身上的自定义变量，用于后续结算判断 |
| 结果-5 | 给交互物-通关机关添加引导提示 | 【执行节点】：使用【挂载循环特效】给通关机关添加特效；<br>【执行节点】：使用【切换生效的气泡对话】把之前制作的气泡对话打开 |

**8.【千星沙箱】交互物-通关机关节点图配置**

在实体节点图中，添加并配置元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**_\*\*该节点图挂载在【交互物-通关机关】上_**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家交互通关机关后，检测玩家身上“是否有钥匙”，有钥匙则成功结算 | 触发场景 | 选择选项卡后，触发事件 | 【事件节点】：选项卡选中时 |
| 条件 | 判断玩家是否有通关道具-钥匙 | 【流程控制节点】：使用【双分支】对交互的玩家身上的自定义变量进行进行判断 |
| 结果-1 | 设定玩家结算状态 | 【执行节点】：使用【设置玩家结算成功状态】，调整玩家的结算状态为“成功”<br>_\*\*不进行结算状态预设，直接使用结算关卡，默认会以“成功”结算，此处仅作为教学演示_ |
| 结果-2 | 结算关卡 | 【执行节点】：使用【结算关卡】进行游戏结算<br>_\*\*结算关卡后会立即结束游戏，通常都是作为流程中的最后一个节点_ |

**9.将节点图分别挂载在元件上，保存设置**

**10.将制作完成的元件摆放在场景中，进入试玩即可体验该功能**

* * *

# 课程总结及辅助课件

**课程作业：** 可根据课程教学内容尝试进行以下功能复刻/拓展

> **功能复刻：** 多人游戏中的争夺宝物机制，交互后获得王冠，最早交互王冠的玩家获胜，其余玩家失败
>
> **进阶拓展：** 制作简易的任务系统，引导玩家击败xx怪物并获得xx道具，在玩家击败怪物获得道具后，交付任务成功结算

**课程回顾：** 学习如何使用关卡结算相关的节点图进行结算状态设定与结算流程设置，制作不同情况下的游戏完成逻辑

### 辅助课件

我们提供了上述课程内容相关的工程文件，可结合 **【教学存档-关卡结算】** 对照学习

关卡结算.gil

28.4 KB