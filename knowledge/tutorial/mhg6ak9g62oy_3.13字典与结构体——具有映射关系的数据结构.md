---
id: mhg6ak9g62oy
title: 3.13字典与结构体——具有映射关系的数据结构
url: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhg6ak9g62oy
sourceURL: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhg6ak9g62oy
description: undefined
language: zh
scope: tutorial
crawledAt: 2025-10-30T19:56:48.005Z
---

# 前言

## 课程说明：

**课程内容：** 数据结构中，字典与结构体的概念介绍与使用方法

**学习目标：** 了解什么是字典、结构体，通过配置具有映射关系的数据结构，进行复杂逻辑中的变量存储与使用。

> **1、字典可用于存储一组具有映射关系的数据。** 例如：在派对游戏中，记录场上所有玩家的分数；不使用字典时，需创建多个自定义变量，分别代表每个玩家的分数；使用字典时，可以建立一个实体与整数的字典，分别代表玩家实体与其对应的分数；
>
> **2、结构体可用于多种数据的组合存储与使用。** 例如：在RPG玩法中，制作一个具有多种属性的【武器】，需要包含的数据信息有【武器名称】（字符串）、【攻击力】（浮点数）、【是否已强化】（布尔值）三个字段，可以通过结构体进行存储与使用。

_\*\*该课程中涉及【局内编辑器面板配置】和【千星沙箱具节点图】两个模块内容，并且相互关联，阅读时建议按照课程顺序完整阅读_

## 相关信息：

**推荐学习顺序：**【前置课程】→【当前课程】→【综合指南】

_\*\*如课程中遇到概念不清等问题或想要了解更多相关信息，根据需要查询_ **_【综合指南】_** _即可_

**前置课程：** 该课程与以下前置课程所讲述的功能知识点相关 _（建议首次使用时，优先学习_ **_【前置课程】_**_，学习体验更流畅）_

> [2.1碰撞与交互——触发一个事件](https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhumsn9uap96)
>
> [3.1自定义变量——特定条件下，切换物体表现状态](https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhflri07dzd4)

**关联知识点：** 课程中将涉及以下基础概念 _（建议优先根据该课程学习即可，如遇到概念不清等问题或想要了解更多相关信息，再根据需要查阅_ **_【综合指南】_** _相关章节）_

> [字典](https://act.mihoyo.com/ys/ugc/tutorial//detail/mhubgk9yy8gy)
>
> [结构体](https://act.mihoyo.com/ys/ugc/tutorial//detail/mh3fmi0t99ns)

* * *

# 字典——一组具有映射关系的数据结构

## 功能示例-1：制作一个字典，存储多个不同物体的积分值，根据拾取的物品获得对应的积分值

### 1.概念简述

**字典：** 通过配置【键】和【值】，构建数据类型A与数据类型B的映射关系，在实际游戏过程中可进行动态查询与使用。

### 2.教学内容

**功能效果：** 制作多个可被拾取的物体，分别具有不同的积分值，拾取后获得积分值不同

**效果演示：**

_\*\*获取的积分值，以玩家界面控件的UI显示文本展示（4个物品对应积分值分别+1、+2、+3、+4）_

_\*\*演示中的文本显示，需达到Lv.3后解锁【自定义文本外显】功能，教程中以效果展示为主_

### 3.操作步骤

**1.【局内编辑器】制作4个不同的物体，添加自定义变量作为其标识**

创建4个元件作为可拾取道具（教程以禽肉、松茸、鱼肉、果实堆为例），在【自定义变量】组件中添加变量作为标识

_\*\*教程中4个元件的做法一致，仅初始值根据不同元件设置，此处以禽肉为例_

**2.【局内编辑器】添加组件，让4个道具可拾取**

给4个元件分别添加【碰撞触发器】组件，添加触发区并设置其参数

_\*\*教程中4个元件的做法完全一致，此处以禽肉为例_

**3.【局内编辑器】制作字典**

由于功能需要，该字典需要具备全局查询能力，因此字典配置在【关卡实体】上，添加自定义变量，设置参数如下：

_变量名称：物品积分表_

_变量类型：字典_

_键类型：字符串，值类型：整数_

_字典列表分别为“物品名称”与其对应的“积分值”_

**4.【局内编辑器】制作积分显示效果**

①给【玩家】添加自定义变量，配置如下

_变量-1，名称：积分值；类型：整数；初始值：0_

_变量-2，名称：拾取到的物品；类型：字符串；初始值默认_

②创建并添加界面控件【文本框】，设置文本内容为：

_你已拾取到【玩家自身变量-拾取到的物品】，获得积分值【+玩家自身变量-积分值】_

**5.【千星沙箱】节点图配置**

在实体节点图中，添加并配置元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**\*\*该节点图挂载在【4个可拾取元件】上**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家进入拾取范围后拾取物品，根据物品增长积分值 | 触发场景 | 进入拾取范围后，触发事件 | 【事件节点】：进入碰撞触发器时 |
| 条件 | / | / |
| 结果-1 | 修改玩家显示的积分值 | 【执行节点】：使用【设置自定义变量】<br>查询关卡实体的字典，通过匹配触发器实体的【自定义变量-名称】查询其对应的积分值 |
| 结果-2 | 修改玩家显示的获取道具 | 【执行节点】：使用【设置自定义变量】<br>由于已经设置物品的【自定义变量-名称】，直接使用该变量替换玩家的变量即可 |
| 结果-3 | 物品拾取后消失 | 【执行节点】：使用【销毁实体】销毁被拾取的物品实体 |

**6.【局内编辑器】挂载节点图**

将配置的节点图挂载在该元件上，保存元件设置

**7.【局内编辑器】放置元件，试玩体验**

将制作好的元件放置在场景中，进入试玩即可体验该功能

_\*\*更多相关信息可自行查阅【综合指南-节点图高级特性-字典】_

# 结构体——将多个不同类型的变量整合的复合数据类型

## 功能示例-2：根据拾取的装备获得对应的属性加成

### 1.概念简述

**结构体：** 特殊的自定义数据类型，可将多个不同类型的变量整合在一起，通常用于表示具有多个属性类型的对象（如：包含各类属性、词条加成的装备/道具等）。

### 2.教学内容

**功能效果：** 制作3个不同等级的装备，根据拾取不同等级的装备，获取对应的属性值

**效果演示：**

_\*\*演示中的文本显示，需达到Lv.3后解锁【自定义文本外显】功能，教程中以效果展示为主_

_\*\*获得的装备属性，以玩家界面控件的UI显示文本展示_

_对应属性值：_

> _1级装备，攻击力+10，防御力+10，生命值+100；_
>
> _2级装备，攻击力+20，防御力+20，生命值+200；_
>
> _3级装备，攻击力+30，防御力+30，生命值+300_

### 3.操作步骤

**1.【局内编辑器】制作3个物体，作为不同等级的装备**

创建3个元件作为可拾取装备（由于目前缺少物件模型，教程以为“空物件+特效”例，并通过模型缩放表示不同等级的装备）

_\*\*教程中3个元件的做法一致，仅【自定义变量】与【特效缩放】差异，此处仅以1级和2级装备为例_

①在【自定义变量】组件中添加变量作为等级标识

_变量名：等级_

_变量类型：整数_

_初始值：根据所设定的元件设置（如：1级大剑的初始值=1；2级大剑的初始值=2）_

②在【特效播放】组件中，添加【循环特效】，选择对应特效，并配置缩放、偏移、旋转（为了便于区分，仅保持缩放与偏移差异）

_缩放比例：根据所设定的元件设置（如：1级大剑=1；2级大剑=1.5）_

_偏移：根据所设定的元件设置（如：1级大剑=1.5；2级大剑=2）_

_旋转：3个元件旋转设置一致_

③添加【碰撞触发器】组件，用于碰撞后触发获取装备的事件

**2.【局内编辑器】添加结构体**

点击局内编辑器左上角（或直接按ESC键）>>>呼出左侧面板-ESC菜单栏，点击>>>进入界面，点击添加结构体>>>在右侧设置结构体内存储的自定义变量>>>完成设置后，点击保存结构体

为达到预期的功能效果教程中配置如下：

_\*\*教程中设置的结构体为装备属性的初始数值，用于后续获取不同等级的装备后的数值计算_

_【x等级的装备属性】=【x等级】\*【结构体的初始值】_

_如：2级装备的属性=2\*初始值_

**3.【局内编辑器】制作积分显示效果**

①给【玩家】添加自定义变量，配置如下

_变量-1，名称：装备的等级；类型：整数；初始值：0_

_变量-2，名称：攻击力加成；类型：浮点数；初始值：0_

_变量-3，名称：防御力加成；类型：浮点数；初始值：0_

_变量-4，名称：生命值加成；类型：浮点数；初始值：0_

②创建并添加界面控件【文本框】，设置文本内容为：

_装备等级是：【玩家自身变量-装备的等级】_

_攻击力加成：【玩家自身变量-攻击力加成】_

_防御力加成：【玩家自身变量-防御力加成】_

_生命值加成：【玩家自身变量-生命值加成】_

**4.【千星沙箱】节点图配置**

在实体节点图中，添加并配置元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**\*\*该节点图挂载在【3个可拾取元件】上**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家进入拾取范围后拾取物品，根据物品增长积分值 | 触发场景 | 进入拾取范围后，触发事件 | 【事件节点】：进入碰撞触发器时 |
| 条件 | / | / |
| 结果-1 | 修改玩家显示的获取装备等级 | 【执行节点】：使用【设置自定义变量】<br>由于已经设置物品的【自定义变量-等级】，直接使用该变量替换玩家的变量即可 |
| 结果-2 | 修改玩家显示的攻击力/防御力/生命值加成 | 【执行节点】：使用【设置自定义变量】<br>获取触发器实体的【自定义变量-等级】，通过【拆分结构体】计算各等级装备的属性 |
| 结果-3 | 物品拾取后消失 | 【执行节点】：使用【销毁实体】销毁被拾取的物品实体 |

**6.【局内编辑器】挂载节点图**

将配置的节点图挂载在该元件上，保存元件设置

**7.【局内编辑器】放置元件，试玩体验**

将制作好的元件放置在场景中，进入试玩即可体验该功能

_\*\*更多相关信息可自行查阅【综合指南-节点图高级特性-结构体】_

* * *

# 课程总结及辅助课件

**课程作业：** 可根据课程教学内容尝试进行以下功能复刻/拓展

> **进阶拓展：** 通过字典与结构体的结合使用，制作RPG玩法中的装备系统设定各装备类型、名称、等级、属性等参数

**课程回顾：** 学习如何使用字典与结构体制作具有映射关系的数据结构，用于功能逻辑中复杂的变量存储与使用

### 辅助课件

我们提供了上述课程内容相关的工程文件，可结合【教学存档-字典与结构体】对照学习

字典与结构体.gil

42.9 KB