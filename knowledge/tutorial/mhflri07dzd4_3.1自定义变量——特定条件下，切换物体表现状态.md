---
id: mhflri07dzd4
title: 3.1自定义变量——特定条件下，切换物体表现状态
url: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhflri07dzd4
sourceURL: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhflri07dzd4
description: undefined
language: zh
scope: tutorial
crawledAt: 2025-12-03T15:16:38.748Z
---

# 前言

## 课程说明：

**课程内容：**【组件-自定义变量】的使用方式

**学习目标：** 学会使用自定义变量给元件/造物（怪物）/角色/玩家等添加标签，用于特定条件判断下的效果执行（如：玩家具有变量-布尔值“是否装备物品”，根据变量判断玩家能否拾取道具；土壤具有变量-整数“土地等级”，根据不同土地等级可进行不同操作，等级0只允许耕地，等级1只允许播种）

_\*\*该课程中涉及【局内编辑器面板配置】和【千星沙箱节点图】两个模块内容，并且相互关联，阅读时建议按照课程顺序完整阅读_

## 相关信息：

**推荐学习顺序：**【当前课程】→【综合指南】

_\*\*如课程中遇到概念不清等问题或想要了解更多相关信息，根据需要查询_ **_【综合指南】_** _即可_

关联知识点：课程中将涉及以下基础概念 _（建议优先根据该课程学习即可，如遇到概念不清等问题或想要了解更多相关信息，再根据需要查阅_ **_【综合指南】_** _相关章节）_

> [自定义变量](https://act.mihoyo.com/ys/ugc/tutorial//detail/mhiyqn9sxvru)

* * *

# 自定义变量——添加一个特定标签

## 功能示例-1：土地升级顺序检查，判断当前土地等级，不同等级下只能进行特定操作

### 1.概念简述

**自定义变量：** 是规定的特定值，用于存储数据值，在节点图中进行数据传输调用。变量具有不同的数据类型，决定了变量可以存储的数据的类型和范围。

_例如，整数型-Int（1、2、3.....）、浮点型-float（1.0、1.1、1.2...）、字符串型、布尔型-bool（是、否）等，变量也具有列表类型，为一系列变量的集合。_

### 2.教学内容

**功能效果：** 制作一个可进行种植的土地地基，土地地基可按照“未开垦→已开垦→已播种→已浇水”进行升级，不同等级下具有不同表现，升级具有固定顺序（如：不可从未开垦直接跳至已播种）

**效果演示：**

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

### 3.操作步骤

**1.【局内编辑器】添加组件**

_\*\*组件-自定义变量默认自带，此处仅演示误操作删除后的添加方式_

创建一个元件作为可种植土壤（教程以空物件为例），在面板中点击>>>进入组件页，点击>>>选择【自定义变量】即可添加

**2.【局内编辑器】添加自定义变量**

打开【组件-自定义变量】后，默认不含有自定义变量，点击下方新增变量即可添加（按需选择添加数量与变量类型即可）

**3.【局内编辑器】配置面板参数**

添加变量后可对变量的名称、类型、初始数值进行调整，为达到预期的功能效果教程中配置如下：

|     |     |
| --- | --- |
| 要做的功能 | 对应的配置项 |
| 变量名设置，用于节点图配置使用 | 【变量名】调整为“土地等级”<br>_\*\*变量名称不影响其效果，仅作为节点图配置和索引使用，以自己方便记忆的命名配置即可_ |
| 土地共具有“未开垦→已开垦→已播种→已浇水”4个等级 | 【变量类型】调整为“整数”<br>_\*\*使用“浮点数”“字符串”等均能满足需要，此处仅为了方便计算使用，可按照自己喜好配置即可_ |
| 土地初始为“未开垦”状态 | 【初始数值】调整为0 |

**4.【局内编辑器】选择土地升级后的效果表现**

教学中演示的做法为，在空物件位置生成不同的其他元件或特效，用于表示土地升级效果，实际制作时可根据需要自行选择所需元件或特效配置。

_\*\*记住元件ID和特效ID即可，用于后续的节点图配置_

_教学中的配置参考：_

_土地等级0：仅空物件_

_土地等级1：创建元件-生成土壤_

_土地等级2：创建元件-生成种子_

_土地等级3：添加特效-已浇水状态_

**5.【局内编辑器】添加【组件-选项卡】作为土地升级的触发事件**

此处选择【组件-选项卡】仅方便教学示例演示使用，实际制作时可灵活调整（如：使用特定道具时触发升级，耙子可以升级土地未开垦→已开垦，种子可以升级土地已开垦→已播种，水壶可以升级土地已播种→已浇水）

为达到预期的功能效果教程中配置如下：

|     |     |
| --- | --- |
| 要做的功能 | 对应的配置项 |
| 土地升级具有“开垦”、“播种”、“浇水”三个触发事件 | 【选项卡】设置数量为3，分别对应三个操作 |
| 进入一定区域范围后可选项操作 | 【选项触发区域】配置一个合适大小即可 |

**6.【千星沙箱】节点图配置**

在实体节点图中，添加并配置该元件的节点图（设置参考见下图），为达到预期的功能效果教程中配置如下：

**_\*\*该节点图挂载在【种植格元件】上_**

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家对土地进行操作后，检测操作是什么，检测土地等级，均符合后提升土地等级 | 触发场景 | 选择选项卡后，触发事件 | 【事件节点】：选项卡选中时 |
| 条件-1 | 根据不同的操作，执行不同的效果 | 【流程控制节点】：使用多分支对“选项序号”进行判断<br>_\*\*该教程中，选项序号分别对应：_<br>_序号1-开垦土地_<br>_序号2-播种_<br>_序号3-浇水_ |
| 条件-2 | 土地升级有固定顺序，不可跳级进行 | 【流程控制节点】：使用双分支对当前的自定义变量“土地等级”进行判断，符合条件的土地才可以进行升级操作（即0级土地只能开垦，1级土地只能播种，2级土地只能浇水） |
| 结果-1 | 根据不同的操作，调整土地表现 | 【执行节点】：使用【创建元件】或【挂载特效】制作土地升级表现 |
| 结果-2 | 根据不同的操作，调整土地等级 | 【执行节点】：使用【设置自定义变量】将土地上的自定义变量“土地等级”改成下一级 |

**7.【局内编辑器】挂载节点图**

将配置的节点图挂载在该元件上，保存元件设置

**8.【局内编辑器】放置元件，试玩体验**

将制作好的元件放置在场景中，进入试玩即可体验该功能

_\*\*更多相关信息可自行查阅【综合指南-组件-自定义变量】_

# 拓展应用

该模块仅作为教学课程所能拓展应用的功能简述，涉及到多模块联动，以操作步骤演示为主，了解进阶用法即可

## 功能示例-2：拾取道具判定，拥有道具时无法拾取，只能切换道具

**功能说明：** 3种道具分别可进行“拾取”和“切换”，没有道具时可以拾取，已拾取道具后只能切换

**效果演示：**

_示例仅初步效果演示，成功拾取/切换的效果通过UI文字展示，实际制作时可灵活考虑添加特效或道具跟随表现_

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**实现步骤：**

**1.制作3个不同道具物件，添加【组件-选项卡】，配置选项“拾取”与“切换”，配置合适的选项触发区域**

**2.【玩家】配置【组件-自定义变量】，添加2个自定义变量，参数如下：**

_变量1-是否有工具，用于判断玩家能否“拾取”或“切换”道具_

_变量2-装备的工具是，用于判断玩家当前身上的道具，“切换”后将原装备的道具放在原地_

**3.节点图配置“拾取”/“切换”道具效果（设置参考见下图），为达到预期的功能效果教程中配置如下：**

_\*\*由于3个道具功能逻辑一致，仅判断玩家身上道具后，生成的道具和切换当前装备的道具差异，教程以其中之一（耙子）示例_

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>没有道具时可拾取；已拾取道具时仅切换，将原拾取道具放下 | 触发场景 | 进行交互操作后 | 【事件节点】：选项卡选中时（交互选择“任意”选项时触发） |
| 条件-1 | 判断玩家的操作是什么 | 【流程控制节点】：使用多分支对“选项序号”进行判断<br>\*\*该教程中，选项序号分别对应：<br>序号1-拾取<br>序号2-切换 |
| 条件-2 | 判断玩家是否已拾取道具 | 【流程控制节点】：使用双分支对【玩家】变量“是否有工具”进行判断 |
| 结果-1 | 没有道具时直接拾取，拾取后道具消失 | 【执行节点】：将【玩家】变量“是否有工具”改为“是”，“装备的工具”改为“耙子”<br>【执行节点】：将拾取的道具销毁 |
| 条件-3 | 切换时，根据玩家已拾取道具生成旧道具 | 【流程控制节点】：使用多分支对【玩家】变量“装备的工具是”进行判断 |
| 结果-2 | 有道具时切换新的道具，切换后道具消失，在原地生成旧道具 | 【执行节点】：使用【创建元件】在原地生成玩家装备的工具对应的元件<br>【执行节点】：将【玩家】变量“装备的工具”改为“耙子”<br>【执行节点】：将拾取的道具销毁 |

**4.将节点图挂载在各对应元件上，保存设置**

**5.将制作完成的元件摆放在场景中，进入试玩即可体验该功能**

* * *

# 课程总结及辅助课件

课程作业：可根据课程教学内容尝试进行以下功能复刻/拓展

功能复刻：制作需要钥匙才能开的门

进阶拓展：制作耙子、种子、水壶3种工具，可对土地进行不同的操作（开垦、播种、浇水），当玩家拥有特定工具后才可以进行对应操作

课程回顾：学会通过设置不同类型的自定义变量做对应的标签，可制作更复杂的条件判断

### 辅助课件

我们提供了上述课程内容相关的工程文件，可结合【教学存档-自定义变量】对照学习

自定义变量.gil

23.5 KB