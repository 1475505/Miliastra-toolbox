---
id: mh8gqrrpzzm6
title: 4.1.1《农场乱斗》耕种-采集流程
url: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mh8gqrrpzzm6
sourceURL: https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mh8gqrrpzzm6
description: undefined
language: zh
scope: tutorial
crawledAt: 2025-12-03T15:17:22.510Z
---

# 前言

## 相关信息：

**推荐学习顺序：**【前置课程】→【当前课程】

**前置课程：** 该课程与以下前置课程所讲述的功能知识点相关 _（建议首次使用时，优先学习【前置课程】，学习体验更流畅）_

> [3.1自定义变量——特定条件下，切换物体表现状态](https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhflri07dzd4)
>
> [3.2定时器——定时发出事件](https://act.mihoyo.com/ys/ugc/tutorial/course/detail/mhq8ew91dx8i)

* * *

## 目标拆解

## 功能逻辑

以下为在该玩法中与耕地-采集相关的功能点，课程中将根据这些功能点进行组合讲解：

①土地具有“未开垦/已开垦/已播种/已浇水”4种可升级状态

②有3种基础工具耙子、种子、水壶，玩家同一时间只能拿起1种工具，拿起后可以切换为其他工具或放下当前工具

③耙子、种子、水壶分别可对土地进行开垦、播种、浇水，拿起工具后才可进行对应操作；土地等级升级不能跳跃，必须按照顺序进行升级

④耙子和水壶可以无限次使用，每个种子只能使用5次

⑤每队玩家只能对己方土地进行“开垦”、“播种”、“浇水”操作，不能在敌方场地进行操作

⑥种子分为“种子期/幼苗期/生长期/成熟期”，种下种子并浇水后，种子每隔一段时间会进行自动生长

⑦成熟期可以进行采集，玩家可以采集己方或敌方的成熟期果实，同时间最多采集3个

⑧将果实交给商人后可获取积分

### ①土地具有“未开垦/已开垦/已播种/已浇水”4种可升级状态

**功能原理：**

教程中使用空物件作为操作物，通过在空物件位置生成新的物件或特效表示土地状态

**效果演示：**

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】创建一个元件作为可种植土地（教程以空物件为例），添加【组件-自定义变量】作为土地升级状态管理**

为达到预期的功能效果教程中配置如下：

|     |     |
| --- | --- |
| 要做的功能 | 对应的配置项 |
| 变量名设置，用于节点图配置使用 | 【变量名】调整为“土地等级”<br>_\*\*变量名称不影响其效果，仅作为节点图配置和索引使用，以自己方便记忆的命名配置即可_ |
| 土地共具有“未开垦→已开垦→已播种→已浇水”4个等级 | 【变量类型】调整为“整数”<br>_\*\*使用“浮点数”“字符串”等均能满足需要，此处仅为了方便计算使用，可按照自己喜好配置即可_ |
| 土地初始为“未开垦”状态 | 【初始数值】调整为0 |

**2.【局内编辑器】选择土地升级后的效果表现**

教学中演示的做法为，在空物件位置生成不同的其他元件或特效，用于表示土地升级效果，实际制作时可根据需要自行选择所需元件或特效配置。

_\*\*记住元件ID和特效ID即可，用于后续的节点图配置_

教学中的配置参考：

土地等级0：仅空物件

土地等级1：创建元件-生成土壤

土地等级2：创建元件-生成种子

土地等级3：添加特效-已浇水状态

### ②有3种基础工具耙子、种子、水壶，玩家同一时间只能拿起1种工具，拿起后可以切换为其他工具

**功能原理：**

拿起工具和切换工具的表现通过“销毁元件”和“创建元件”实现；

是否可拾取通过自定义变量“是否有道具”判断；

拾取道具后在玩家的自定义变量存储“拾取的道具是什么”，切换时根据玩家身上当前的变量创建对应的道具

**效果演示：**

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】制作3个不同道具物件，添加【组件-选项卡】，配置选项“拾取”与“切换”，配置合适的选项触发区域**

**2.【玩家】配置【组件-自定义变量】，添加2个自定义变量，参数如下：**

_变量1-是否有工具，用于判断玩家能否“拾取”或“切换”道具_

_变量2-装备的工具是，用于判断玩家当前身上的道具，“切换”后将原装备的道具放在原地_

**3.【千星沙箱】实体节点图配置“拾取”/“切换”道具效果（设置参考见下图），配置完成后保存元件设置**

为达到预期的功能效果教程中配置如下：

_\*\*由于3个道具功能逻辑一致，仅判断玩家身上道具后，生成的道具和切换当前装备的道具差异，教程以其中之一（耙子）示例_

该节点图挂载对象为：【各个工具】（以下以耙子示例）

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>没有道具时可拾取；已拾取道具时仅切换，将原拾取道具放下 | 触发场景 | 进行交互操作后 | 【事件节点】：选项卡选中时（交互选择“任意”选项时触发） |
| 条件-1 | 判断玩家的操作是什么 | 【流程控制节点】：使用多分支对“选项序号”进行判断<br>_\*\*该教程中，选项序号分别对应：_<br>_序号1-拾取_<br>_序号2-切换_ |
| 条件-2 | 判断玩家是否已拾取道具 | 【流程控制节点】：使用双分支对【玩家】变量“是否有工具”进行判断 |
| 结果-1 | 没有道具时直接拾取，拾取后道具消失 | 【执行节点】：将【玩家】变量“是否有工具”改为“是”，“装备的工具”改为“耙子”<br>【执行节点】：将拾取的道具销毁 |
| 条件-3 | 切换时，根据玩家已拾取道具生成旧道具 | 【流程控制节点】：使用多分支对【玩家】变量“装备的工具是”进行判断 |
| 结果-2 | 有道具时切换新的道具，切换后道具消失，在原地生成旧道具 | 【执行节点】：使用【创建元件】在原地生成玩家装备的工具对应的元件<br>【执行节点】：将【玩家】变量“装备的工具”改为“耙子”<br>【执行节点】：将拾取的道具销毁 |

### ③耙子、种子、水壶分别可对土地进行开垦、播种、浇水，拿起工具后可进行对应操作或主动放下工具；土地等级升级不能跳跃，必须按照顺序进行升级

**功能原理：**

拿起工具后给玩家的角色添加新的技能“使用工具”和“丢弃”

使用工具的效果分别对应3个技能，即开垦、播种、浇水；

玩家身上设置一个变量判断目前选中的“可交互的土地”是哪个

进入可交互区后将对应的土地设置为玩家的变量

使用工具后让玩家对选中土地进行操作

**效果演示：**

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】制作4个技能，按照需求配置其动画，分别对应：**

耙子-开垦，普通技能，动画播放时间为0.5s

种子-种植，普通技能，动画播放时间为0.5s

水壶-浇水，普通技能，动画播放时间为0.5s

通用-放下工具，瞬发技能

**2.【千星沙箱】客户端节点图-技能节点图中制作技能效果**

_\*\*由于本地技能不具备直接操作效果，因此仅发送使用技能信号，转由服务器节点图制作_

耙子-开垦、种子-种植、水壶-浇水，对应节点图为：

通用-放下工具，对应节点图为：

**3.【千星沙箱】制作玩家拾取工具后获取技能的效果**

**功能原理：**

玩家拾取工具——根据获取的工具，更改玩家自定义变量——根据自定义变量获取技能

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【玩家】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>玩家拾取工具后，获得对应工具的技能 | 触发场景 | 玩家拾取工具时 | 【事件节点】：选项卡选中时 |
| 条件 | 判断玩家拾取的工具是什么 | 【流程控制节点】：使用多分支对自定义变量变化的值进行判断 |
| 结果 | 角色可以使用或丢弃工具 | 【执行节点】：使用【添加技能】添加工具的基础技能和通用“丢弃”技能<br>_\*\*技能是添加给【角色】而非【玩家】_ |

**4.【千星沙箱】制作玩家放下工具后，生成工具并移除技能的效果**

**功能原理：**

玩家丢弃工具——根据玩家当前自定义变量生成对应的工具——还原玩家自定义变量——移除全部技能

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【角色】

_\*\*【技能节点调用时】为【角色】监听使用，需要挂载在角色上_

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-2<br>玩家放下工具后，原地生成工具，并移除可用技能 | 触发场景 | 玩家使用工具技能时 | 【事件节点】：【技能节点调用时】<br>监听客户端节点【通知服务器节点图】 |
| 条件-1 | 判断玩家使用的技能是“丢弃” | 【流程控制节点】：使用多分支对技能传参进行判断 |
| 条件-2 | 判断玩家当前身上的工具是什么 | 【流程控制节点】：使用多分支对玩家变量“装备的工具是”进行判断 |
| 结果-1 | 放下工具 | 【执行节点】：使用【创建元件】生成玩家当前身上的工具 |
| 结果-2 | 让玩家后续可以拾取工具 | 【执行节点】：设置自定义变量，不配值 |
| 结果-3 | 不能继续使用工具技能 | 【执行节点】：使用【以槽位删除角色技能】移除技能 |

**5.【局内编辑器】明确玩家当前是对哪个土地进行操作**

在【玩家】-【自定义变量】中增加“可操作的土地是”，类型设置为实体

_\*\*示例图中由于字符数量超出可显示字数，未展示全_

**6.【局内编辑器】通过玩家进入土地的一定范围区域，使这个土地变成可操作的**

土地添加【组件-碰撞触发器】，根据需要配置适合的缩放大小，生效目标仅角色

**7.【千星沙箱】制作玩家进入区域后使土地可操作的效果**

**功能原理：**

玩家进入区域——更改玩家自定义变量——后续对该自定义变量（进入的土地）进行操作

玩家离开区域——还原玩家自定义变量——即无法对土地进行操作

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【土地】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>玩家进入区域后，该土地可操作 | 触发场景 | 玩家进入土地特定区域后 | 【事件节点】：【进入碰撞触发器时】 |
| 条件 | / | / |
| 结果 | 玩家可对该土地操作 | 【执行节点】：使用【设置自定义变量】将该土地实体存储 |
| 功能-2<br>玩家离开区域后，该土地不可操作 | 触发场景 | 玩家离开土地特定区域后 | 【事件节点】：【离开碰撞触发器时】 |
| 条件 | / | / |
| 结果 | 玩家不可对该土地操作 | 【执行节点】：使用【设置自定义变量】设为空值 |

**8.【千星沙箱】制作玩家使用不同工具后对土地的操作效果**

**功能原理：**

玩家使用工具——判断玩家自定义变量-拿的是什么工具——判断土地等级-匹配工具可使用的土地（如：耙子只能对未开垦的土地开垦，种子只能对已开垦的土地播种等）——执行对应工具的效果——提升土地等级变量

_\*\*由于3个道具功能逻辑一致，先判断玩家身上道具（对应不同操作），然后判断当前的土地等级（限制跳级），执行不同效果，教程以其中之一（耙子）示例_

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【角色】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家使用工具后，根据不同工具和土地等级进行升级操作 | 触发场景 | 玩家使用工具技能时 | 【事件节点】：【技能节点调用时】<br>监听客户端节点【通知服务器节点图】 |
| 条件-1 | 判断玩家使用的技能是“操作工具” | 【流程控制节点】：使用多分支对技能传参进行判断 |
| 条件-2 | 判断玩家当前身上的工具是什么 | 【流程控制节点】：使用多分支对玩家变量“装备的工具是”进行判断 |
| 结果-1 | 土地升级表现 | 【执行节点】：使用【创建元件】生成物件/特效<br>_\*\*操作步骤①设定的土地升级效果_ |
| 结果-2 | 土地升级后限制不同工具操作 | 【执行节点】：设置自定义变量，将土地等级+1 |

### ④耙子和水壶可以无限次使用，每个种子只能使用5次

**功能原理：**

无限次使用的道具无需额外配置

通过自定义变量控制使用次数，每次使用减少自定义变量，达到一定值后销毁不能使用

**效果演示：**

_\*\*教程为了方便演示增加了UI显示种子可使用次数（此处暂不拓展，会在后续课程进行讲解）_

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】玩家设定自定义变量，用来判断目前拾取的种子的可使用次数**

_变量类型：整数_

_初始值：0_

**2.【局内编辑器】工具-种子设定自定义变量，用来判断目前自身的可使用次数**

_变量类型：整数_

_初始值：5_

**3.【千星沙箱】制作种子使用限制效果**

**功能原理：**

未使用的种子自身具有“5”次初始可使用数量变量——拾取物件时将该变量传递给【玩家】——玩家每次使用时使变量-1——玩家放下或切换工具时，将玩家身上的变量传给新的生成的种子——如果玩家使用后变量=0则种子达到使用上限，移除玩家身上工具和种子相关变量

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：各个【工具】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>玩家拾取工具时，将拾取种子的可使用次数传递给玩家 | 触发场景 | 玩家拾取种子时 | /<br>_\*\*无需额外配置，直接使用步骤③中的拾取切换节点图_ |
| 条件 | 能否拾取/切换 | /<br>_\*\*无需额外配置，直接使用步骤③中的拾取切换节点图_ |
| 结果 | 将变量传递给玩家 | 【执行节点】：使用【设置自定义变量】将种子身上的变量传给【玩家】 |

该节点图挂载对象为：【角色】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-2<br>玩家使用种子后，可使用次数减少 | 触发场景 | 使用种子工具 | /<br>_\*\*无需额外配置，直接使用步骤③中的使用工具节点图_ |
| 条件 | 能否使用 | /<br>_\*\*无需额外配置，直接使用步骤③中的使用工具节点图_ |
| 结果 | 使玩家可使用种子次数减少1次 | 【执行节点】：使用【设置自定义变量】将玩家身上记录的自定义变量-1 |

由于切换/放下物品时逻辑一致，仅需将所有相关节点图配置即可，相关的节点图：

从“水壶”/“种子”/“耙子”切换为“种子”——该节点图挂载对象为：各个【工具】

玩家主动放下“种子”——该节点图挂载对象为：【角色】

_教程中仅以工具切换为种子作为示例_

该节点图挂载对象为：各个【工具】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-3<br>玩家切换/放下种子时，新生成种子的可使用次数和玩家手中的种子可使用次数相同 | 触发场景 | 切换/放下种子 | /<br>_\*\*无需额外配置，直接使用步骤③中的拾取切换节点图_ |
| 条件 | 能否切换/放下 | /<br>_\*\*无需额外配置，直接使用步骤③中的拾取切换节点图_ |
| 结果-1 | 新生成种子的可使用次数与玩家手中的种子可使用次数一致 | 【执行节点】：使用【设置自定义变量】将玩家身上记录的自定义变量传递给新生成的种子 |
| 结果-2 | 刷新玩家的自定义变量 | 【执行节点】：使用【设置自定义变量】将玩家身上记录的“种子可使用次数”自定义变量清空 |

该节点图挂载对象为：【玩家】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-4<br>玩家手中种子的可使用次数为0时，种子工具失效 | 触发场景 | 玩家使用种子 | 【事件节点】：玩家的种子可使用次数的自定义变量-1<br>_\*\*前置使用种子时，自定义变量-1，所以直接使用该节点图_ |
| 条件 | 能否切换/放下 | /<br>_\*\*无需额外配置，直接使用步骤③中的拾取切换节点图_ |
| 结果-1 | 新生成种子的可使用次数与玩家手中的种子可使用次数一致 | 【执行节点】：使用【设置自定义变量】将玩家身上记录的自定义变量传递给新生成的种子 |
| 结果-2 | 刷新玩家的自定义变量 | 【执行节点】：使用【设置自定义变量】将玩家身上记录的“种子可使用次数”自定义变量清空 |

### ⑤种子分为“种子期/幼苗期/生长期/成熟期”，种下种子并浇水后，种子每隔一段时间会进行自动生长

**功能原理：**

成功给种子浇水后，挂载定时器，每隔固定时间使植物触发1次升级

通过销毁和创建新的元件表示植物升级效果

**效果演示：**

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】制作3个不同的种子生长时期的效果**

教学中演示的做法为，在空物件位置生成不同的其他元件，用于表示植物生长效果，实际制作时可根据需要自行选择所需元件配置

_\*\*记住元件ID即可，用于后续的节点图配置_

教程设定参考如下：

种植物-幼苗期：仅元件模型不同

种植物-生长期：仅元件模型不同

种植物-成熟期：模型元件不同，同时添加了循环特效表示此时的果实已成熟

**2.【局内编辑器】添加自定义变量管理土地上的种植物**

由于教程中将使用“删除旧的种植物，生成新的种植物”制作植物生长表现，需要在种植格上保存旧的种植物，因此添加【组件-自定义变量】

_类型为：实体_

**3.【千星沙箱】配置种植物升级效果节点图**

**功能原理：**

玩家使用种子播种时——将生成的种植物-种子期存为土地的变量

检测种子成功浇水后——挂载定时器用于触发种子升级

用定时器每隔2s触发1次升级——采用销毁旧的-生成新的方式表示植物生长

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【角色】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>种下植物后，将植物存为土地的变量 | 触发场景 | 玩家使用种子 | /<br>_\*\*无需额外配置，直接使用步骤③中的使用工具节点图_ |
| 条件 | 使用的工具是种子，土地可播种 | /<br>_\*\*无需额外配置，直接使用步骤③中的使用工具节点图_ |
| 结果 | 确认种植的植物是哪个（制作生长表现使用） | 【执行节点】：使用设置自定义变量，将生成的实体存为当前可操作的土地的变量 |

该节点图挂载对象为：【土地】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-2<br>成功浇水后触发生长 | 触发场景 | 浇水后 | 【事件节点】：自定义变量变化时<br>_\*\*浇水会改变土地等级，因此使用自定义变量变化时作为触发事件_ |
| 条件 | 土地浇水 | / |
| 结果-1 | 种下植物 | 【执行节点】：使用【创建元件】在土地的自身位置生成种子期的种植物 |
| 结果-3 | 植物开始生长 | 【执行节点】：使用【启动定时器】挂载在种植格上，配置定时器序列为：2、4、6<br>_\*\*定时器序列即为定时器运行多久后发出一次时间，由于植物生长是单次且不循环的，因此配置第2/4/6s生长1次_ |
| 功能-3<br>每隔2s植物生长1次 | 触发场景 | 每隔一段时间 | 【事件节点】：定时器触发时 |
| 结果-1 | 销毁当前种植的植物（教程中通过销毁旧的，生成新的种植物制作植物生长效果） | 【执行节点】：使用【销毁实体】销毁当前保存的种植物变量 |
| 条件 | 2、4、6s植物生长状态不同 | 【流程控制节点】：使用【多分支】对定时器阶段进行判断，特定时间进行不同等级的成长 |
| 结果-2 | 植物生长变化 | 【执行节点】：使用【创建元件】制作植物生长表现 |
| 结果-3 | 确认种植的植物是哪个（制作生长表现使用） | 【执行节点】：【设置自定义变量】将生成的种植物保存为变量 |

### ⑥成熟期可以进行采集，玩家可以采集己方或敌方的成熟期果实，同时间最多采集3个

**功能原理：**

用自定义变量“是否可以采集”——植物生长到最后一级时——修改自定义变量

玩家进入一定区域后——判断自定义变量“是否可以采集”——判断玩家“当前采集数量”<3——判断成功执行采集流程

采集时——还原土地等级——清空种植物——给玩家添加采集物数量（用于后续根据采集物数量）

**效果演示：**

_\*\*教程为了方便演示增加了UI显示采集的果实数（此处暂不拓展，会在后续课程进行讲解）_

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**实现步骤：**

**1.【局内编辑器】给土地添加一个变量用于管理是否可以采集的状态**

_类型：布尔值；_

_初始值：否_

**2.【局内编辑器】给【玩家】添加一个自定义变量用于记录玩家当前采集的数量**

_类型：整数_

_初始值：0_

**3.【千星沙箱】在种植物生长到最高级时，改变土地的自定义变量“是否可采集”，让土地可采集**

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【土地】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>植物生长到成熟期时，可采集 | 触发场景 | 种植物生长 | /<br>_\*\*无需额外配置，直接使用步骤⑤中的种植物生长节点图_ |
| 条件 | 生长到最高级 | /<br>_\*\*无需额外配置，直接使用步骤⑤中的种植物生长节点图_ |
| 结果 | 让土地可采集 | 【执行节点】：使用设置自定义变量，将土地改为可采集状态 |

s

**4.【千星沙箱】在种植物生长到最高级时，改变土地的自定义变量“是否可采集”，让土地可采集**

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【土地】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-2<br>种下植物后，将植物存为土地的变量 | 触发场景 | 玩家进入土地区域 | 【事件节点】：进入土地的碰撞触发区 |
| 条件-1 | 土地可采集 | 【流程控制节点】：用双分支判断目前土地是否可采集 |
| 条件-2 | 玩家当前采集数量小于3 | 【流程控制节点】：用双分支判断玩家当前采集数量 |
| 结果-1 | 让玩家采集数量增加 | 【执行节点】：使用设置自定义变量，增加玩家的采集数量 |
| 结果-2 | 让土地恢复到已开垦状态 | 【执行节点】：使用设置自定义变量，修改土地等级 |
| 结果-3 | 土地不可采集 | 【执行节点】：使用设置自定义变量，设置为不可采集 |
| 结果-4 | 删除土地上的植物和浇水状态 | 【执行节点】：使用销毁实体+设置自定义变量，删除土地上的植物<br>【执行节点】：使用删除特效，删除土地的浇水状态 |

### ⑦将果实交给商人后可获取积分

**功能原理：**

用自定义变量“积分值”管理玩家出售果实后的积分——玩家进入果实商区域内出售身上的果实——根据玩家身上的果实数获得积分

**效果演示：**

_\*\*教程为了方便演示增加了UI显示积分值（此处暂不拓展，会在后续课程进行讲解）_

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】制作一个果实商，用于出售果实；添加【组件-碰撞触发器】用于检测玩家进入后出售果实**

**2.【局内编辑器】给【玩家】添加一个自定义变量用于记录玩家当前积分值**

_类型：整数_

_初始值：0_

**3.【千星沙箱】制作出售果实效果**

**功能原理：**

玩家进入区域后——根据玩家身上的果实数量获得积分——清空当前玩家身上的果实数量

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【果实商】

积分值计算公式为：新积分值=旧积分值+上交采集物数量\*10

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能<br>玩家进入果实商区域后，出售身上的果实，获得积分 | 触发场景 | 玩家进入果实商区域 | 【事件节点】：进入果实商的碰撞触发区 |
| 条件 | / | / |
| 结果-1 | 让玩家积分值增加 | 【执行节点】：使用设置自定义变量，增加玩家的积分值<br>_\*\*教程中以1果实=10积分计算，实际可自由配置_ |
| 结果-2 | 玩家出售所有果实 | 【执行节点】：使用设置自定义变量，清空玩家身上的果实数量 |

### ⑧每队玩家只能对己方土地进行“开垦”、“播种”、“浇水”操作，不能在敌方场地进行操作

**功能原理：**

将玩家分为不同阵营，设置的土地格也分配为不同阵营；

布设时将同阵营的土地格布设在同一个场地；

判断玩家是否可操作土地格时，仅同阵营土地格可操作

**效果演示：**

_\*\*已在2个区域上布设不同阵营的土地_

_\*\*演示中的文本显示，需达到特定奇匠等级后解锁【自定义文本外显】功能，教程中以效果展示为主_

**操作步骤：**

**1.【局内编辑器】分配玩家队伍**

_\*\*由于该玩法中仅涉及4个玩家和队伍，因此使用【阵营】进行设定_

在【关卡设置-阵营】中添加多个阵营，分别将玩家1~4设定在不同阵营中

阵营关系设定中可将各队伍均改为友善

**2.【局内编辑器】将土地元件创建4个，分别对应队伍1~4**

**3.【千星沙箱】制作土地阵营匹配标签，仅同阵营的土地可操作**

**功能原理：**

玩家进入土地可操作区域时——判定土地阵营与玩家阵营是否一致——一致则可以操作

为达到预期的功能效果教程中配置如下：

该节点图挂载对象为：【土地】

|     |     |     |     |
| --- | --- | --- | --- |
|  |  | 要做的功能 | 对应的配置项 |
| 功能-1<br>玩家进入同阵营土地后，土地可操作 | 触发场景 | 玩家进入土地特定区域后 | /<br>_\*\*无需额外配置，直接使用步骤③中的土地可操作节点图_ |
| 条件 | 土地是否是同阵营的 | 【流程控制节点】：使用【双分支】对土地阵营和玩家阵营进行判断，一致则执行后续 |
| 结果 | 玩家可对该土地操作 | /<br>_\*\*无需额外配置，直接使用步骤③中的土地可操作节点图_ |

* * *

# 辅助课件

### 辅助课件

我们提供了上述课程内容相关的工程文件，可结合【教学存档-耕种-采集流程】对照学习

耕种-采集流程.gil

94.7 KB