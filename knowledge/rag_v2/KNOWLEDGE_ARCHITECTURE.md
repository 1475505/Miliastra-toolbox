# çŸ¥è¯†åº“æ¶æ„ä¸RAGä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•
1. [é—®é¢˜åˆ†æ](#é—®é¢˜åˆ†æ)
2. [çŸ¥è¯†åº“åˆ†å±‚ç»„ç»‡](#çŸ¥è¯†åº“åˆ†å±‚ç»„ç»‡)
3. [æ–‡æ¡£é¢„å¤„ç†ç­–ç•¥](#æ–‡æ¡£é¢„å¤„ç†ç­–ç•¥)
4. [å‘é‡æ£€ç´¢ä¼˜åŒ–](#å‘é‡æ£€ç´¢ä¼˜åŒ–)
5. [å®ç°è·¯çº¿å›¾](#å®ç°è·¯çº¿å›¾)

---

## é—®é¢˜åˆ†æ

### å½“å‰RAGåŒ¹é…å›°éš¾çš„æ ¹æœ¬åŸå› 

ä½ çš„çŸ¥è¯†åº“æœ‰**170+ä¸ªæ–‡æ¡£**ï¼Œä½†ç›´æ¥RAGæ£€ç´¢æ•ˆæœå·®çš„åŸå› ï¼š

1. **æ–‡æ¡£ç²’åº¦é—®é¢˜**
   - æ¯ä¸ªæ–‡æ¡£éƒ½æ˜¯ç‹¬ç«‹çš„æ¦‚å¿µï¼ˆå¦‚"èƒ½åŠ›å•å…ƒ"ã€"å‘½ä¸­æ£€æµ‹"ï¼‰
   - ç”¨æˆ·é—®é¢˜é€šå¸¸è·¨è¶Šå¤šä¸ªæ¦‚å¿µï¼ˆå¦‚"æ€æ ·åˆ¶ä½œä¸€ä¸ªèƒ½æ”»å‡»çš„è§’è‰²"ï¼‰
   - ç›´æ¥å‘é‡åŒ¹é…æ— æ³•ç†è§£è¿™ç§**è·¨æ¦‚å¿µçš„å…³è”**

2. **ç¼ºå°‘ä¸Šä¸‹æ–‡å±‚çº§**
   - æ²¡æœ‰"ä»»åŠ¡æµç¨‹"çš„æ¦‚å¿µ
   - æ²¡æœ‰"ä½¿ç”¨åœºæ™¯"çš„åˆ†ç±»
   - æ²¡æœ‰"å‰ç½®çŸ¥è¯†"çš„æ ‡è®°
   - ç”¨æˆ·é—®é¢˜ â†’ æ–‡æ¡£çš„æ˜ å°„å…³ç³»ä¸æ¸…æ™°

3. **æ–‡æ¡£å†…å®¹ç»“æ„åŒ–ä¸è¶³**
   - æ–‡æ¡£å†…å®¹æ··æ‚ï¼ˆæ¦‚å¿µå®šä¹‰ + ç¼–è¾‘æ­¥éª¤ + å‚æ•°è¯´æ˜ï¼‰
   - æ²¡æœ‰æå–"å…³é”®ä¿¡æ¯"å’Œ"å¸¸è§é—®é¢˜"
   - æ²¡æœ‰"å¿«é€ŸæŸ¥è¯¢è¡¨"å’Œ"å†³ç­–æ ‘"

### è§£å†³æ–¹æ¡ˆæ ¸å¿ƒæ€è·¯

**ä¸æ˜¯æ”¹è¿›RAGç®—æ³•ï¼Œè€Œæ˜¯æ”¹è¿›çŸ¥è¯†çš„ç»„ç»‡æ–¹å¼**

```
åŸå§‹æ–‡æ¡£ â†’ é¢„å¤„ç†æç‚¼ â†’ åˆ†å±‚ç»„ç»‡ â†’ å¢å¼ºç´¢å¼• â†’ ç²¾å‡†æ£€ç´¢
```

---

## çŸ¥è¯†åº“åˆ†å±‚ç»„ç»‡

### ç¬¬ä¸€å±‚ï¼šä»»åŠ¡å¯¼å‘çš„å·¥ä½œæµï¼ˆTask Flowï¼‰

å°†170+ä¸ªæ–‡æ¡£é‡æ–°ç»„ç»‡æˆ**20-30ä¸ªå¸¸è§ä»»åŠ¡æµç¨‹**ï¼š

```
ä»»åŠ¡æµç¨‹å±‚
â”œâ”€â”€ ğŸ® æ¸¸æˆç©æ³•è®¾è®¡
â”‚   â”œâ”€â”€ åˆ¶ä½œä¸€ä¸ªå¯æ”»å‡»çš„è§’è‰²
â”‚   â”œâ”€â”€ åˆ¶ä½œä¸€ä¸ªä¼šç§»åŠ¨çš„æ•Œäºº
â”‚   â”œâ”€â”€ åˆ¶ä½œä¸€ä¸ªå¯äº¤äº’çš„ç‰©ä»¶
â”‚   â””â”€â”€ åˆ¶ä½œä¸€ä¸ªä¼¤å®³ç³»ç»Ÿ
â”œâ”€â”€ ğŸ¨ ç•Œé¢ä¸è§†è§‰
â”‚   â”œâ”€â”€ åˆ¶ä½œUIç•Œé¢
â”‚   â”œâ”€â”€ åˆ¶ä½œç‰¹æ•ˆå’ŒåŠ¨ç”»
â”‚   â””â”€â”€ åˆ¶ä½œå°åœ°å›¾ç³»ç»Ÿ
â”œâ”€â”€ ğŸ”§ ç³»ç»Ÿä¸é€»è¾‘
â”‚   â”œâ”€â”€ åˆ¶ä½œèƒŒåŒ…ç³»ç»Ÿ
â”‚   â”œâ”€â”€ åˆ¶ä½œå•†åº—ç³»ç»Ÿ
â”‚   â””â”€â”€ åˆ¶ä½œæˆå°±ç³»ç»Ÿ
â””â”€â”€ ğŸ“Š é«˜çº§åŠŸèƒ½
    â”œâ”€â”€ åˆ¶ä½œå¤šäººæ¸¸æˆ
    â”œâ”€â”€ åˆ¶ä½œæ’è¡Œæ¦œ
    â””â”€â”€ åˆ¶ä½œå…³å¡ç»“ç®—
```

### ç¬¬äºŒå±‚ï¼šæ¦‚å¿µçŸ¥è¯†åº“ï¼ˆConcept Graphï¼‰

ä¸ºæ¯ä¸ªä»»åŠ¡æµç¨‹ï¼Œæ ‡è®°æ‰€éœ€çš„**æ ¸å¿ƒæ¦‚å¿µ**åŠå…¶å…³ç³»ï¼š

```json
{
  "task_id": "create_attacking_character",
  "task_name": "åˆ¶ä½œä¸€ä¸ªå¯æ”»å‡»çš„è§’è‰²",
  "description": "ä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿè¿›è¡Œæ”»å‡»çš„è§’è‰²",
  "required_concepts": [
    {
      "concept": "è§’è‰²",
      "doc_id": "mh3ecor1x5cm",
      "importance": "critical",
      "reason": "è§’è‰²æ˜¯åŸºç¡€å•ä½"
    },
    {
      "concept": "åŸºç¡€æˆ˜æ–—å±æ€§",
      "doc_id": "mhvyqz9xwu0q",
      "importance": "critical",
      "reason": "å®šä¹‰æ”»å‡»åŠ›ã€é˜²å¾¡ç­‰å±æ€§"
    },
    {
      "concept": "èƒ½åŠ›å•å…ƒ",
      "doc_id": "mh0ucw9e76f6",
      "importance": "high",
      "reason": "å®šä¹‰æ”»å‡»æ•ˆæœ"
    },
    {
      "concept": "å‘½ä¸­æ£€æµ‹",
      "doc_id": "mh2pir0hat1s",
      "importance": "high",
      "reason": "åˆ¤å®šæ”»å‡»æ˜¯å¦å‘½ä¸­"
    },
    {
      "concept": "èŠ‚ç‚¹å›¾",
      "doc_id": "mhjwjrr5n73i",
      "importance": "high",
      "reason": "ç¼–å†™æ”»å‡»é€»è¾‘"
    }
  ],
  "step_by_step": [
    "1. åˆ›å»ºæˆ–é€‰æ‹©ä¸€ä¸ªè§’è‰²å…ƒä»¶",
    "2. åœ¨åŸºç¡€ä¿¡æ¯ä¸­é…ç½®åŸºç¡€æˆ˜æ–—å±æ€§",
    "3. åœ¨ç‰¹åŒ–é…ç½®ä¸­æ·»åŠ èƒ½åŠ›å•å…ƒï¼ˆæ”»å‡»æ•ˆæœï¼‰",
    "4. æ·»åŠ å‘½ä¸­æ£€æµ‹ç»„ä»¶",
    "5. ç¼–å†™èŠ‚ç‚¹å›¾é€»è¾‘å¤„ç†æ”»å‡»äº‹ä»¶"
  ],
  "common_questions": [
    "æ€æ ·è®¾ç½®æ”»å‡»ä¼¤å®³ï¼Ÿ",
    "æ€æ ·è®©æ”»å‡»å‘½ä¸­æ•Œäººï¼Ÿ",
    "æ€æ ·æ’­æ”¾æ”»å‡»ç‰¹æ•ˆï¼Ÿ"
  ]
}
```

### ç¬¬ä¸‰å±‚ï¼šå¿«é€ŸæŸ¥è¯¢è¡¨ï¼ˆQuick Referenceï¼‰

ä¸ºæ¯ä¸ªæ¦‚å¿µæ–‡æ¡£ç”Ÿæˆ**ç»“æ„åŒ–çš„å¿«é€ŸæŸ¥è¯¢è¡¨**ï¼š

```markdown
# èƒ½åŠ›å•å…ƒ - å¿«é€ŸæŸ¥è¯¢

## æ˜¯ä»€ä¹ˆï¼Ÿ
èƒ½åŠ›å•å…ƒæ˜¯ä¸€ç»„é¢„å®šä¹‰çš„èƒ½åŠ›æ•°æ®ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶è¢«èŠ‚ç‚¹å›¾ã€å‘½ä¸­æ£€æµ‹ç­‰è°ƒç”¨ã€‚

## æœ‰å“ªäº›ç±»å‹ï¼Ÿ
| ç±»å‹ | ç”¨é€” | è°ƒç”¨å…¥å£ |
|------|------|--------|
| æ”»å‡»ç›’æ”»å‡» | ä»¥æŒ‡å®šä½ç½®å‘èµ·æ”»å‡»ç›’æ”»å‡» | èŠ‚ç‚¹å›¾ã€å‘½ä¸­æ£€æµ‹ã€æœ¬åœ°æŠ•å°„ç‰© |
| ç›´æ¥æ”»å‡» | å¯¹æŒ‡å®šç›®æ ‡å‘èµ·ç›´æ¥æ”»å‡» | èŠ‚ç‚¹å›¾ã€å‘½ä¸­æ£€æµ‹ã€æœ¬åœ°æŠ•å°„ç‰© |
| æ’­æ”¾ç‰¹æ•ˆ | æ’­æ”¾é™æ—¶ç‰¹æ•ˆ | æœ¬åœ°æŠ•å°„ç‰© |
| åˆ›å»ºæœ¬åœ°æŠ•å°„ç‰© | åˆ›ç”ŸæŠ•å°„ç‰© | æœ¬åœ°æŠ•å°„ç‰© |
| æ·»åŠ å•ä½çŠ¶æ€ | æ·»åŠ å¢ç›Š/å‡ç›Š | æœ¬åœ°æŠ•å°„ç‰© |
| ç§»é™¤å•ä½çŠ¶æ€ | ç§»é™¤å¢ç›Š/å‡ç›Š | æœ¬åœ°æŠ•å°„ç‰© |
| é”€æ¯è‡ªèº« | é”€æ¯å®ä½“ | æœ¬åœ°æŠ•å°„ç‰© |
| æ¢å¤ç”Ÿå‘½ | æ¢å¤ç›®æ ‡ç”Ÿå‘½ | èŠ‚ç‚¹å›¾ã€å‘½ä¸­æ£€æµ‹ã€æœ¬åœ°æŠ•å°„ç‰© |

## æ€æ ·ä½¿ç”¨ï¼Ÿ
1. åœ¨ç‰¹åŒ–é…ç½®é¡µç­¾ç¼–è¾‘èƒ½åŠ›å•å…ƒ
2. ç‚¹å‡»+å·æ–°å¢é…ç½®
3. é€‰æ‹©èƒ½åŠ›å•å…ƒç±»å‹
4. é…ç½®å…·ä½“å‚æ•°
5. åœ¨è°ƒç”¨å…¥å£å¼•ç”¨è¯¥èƒ½åŠ›å•å…ƒ

## å¸¸è§é—®é¢˜
- Q: èƒ½åŠ›å•å…ƒå’ŒèŠ‚ç‚¹å›¾çš„åŒºåˆ«ï¼Ÿ
  A: èƒ½åŠ›å•å…ƒæ˜¯æ•°æ®ï¼ŒèŠ‚ç‚¹å›¾æ˜¯é€»è¾‘ã€‚èƒ½åŠ›å•å…ƒé¢„å®šä¹‰æ•ˆæœï¼ŒèŠ‚ç‚¹å›¾æ§åˆ¶ä½•æ—¶è°ƒç”¨ã€‚
```

---

## æ–‡æ¡£é¢„å¤„ç†ç­–ç•¥

### æ­¥éª¤1ï¼šæ–‡æ¡£å†…å®¹åˆ†è§£

å¯¹æ¯ä¸ªåŸå§‹æ–‡æ¡£è¿›è¡Œ**ç»“æ„åŒ–åˆ†è§£**ï¼š

```python
# ä¼ªä»£ç ç¤ºä¾‹
def decompose_document(doc):
    return {
        "metadata": {
            "id": doc.id,
            "title": doc.title,
            "category": extract_category(doc),
            "difficulty": estimate_difficulty(doc),
            "related_docs": extract_references(doc)
        },
        "core_concept": {
            "definition": extract_definition(doc),
            "key_terms": extract_key_terms(doc),
            "use_cases": extract_use_cases(doc)
        },
        "quick_reference": {
            "parameters": extract_parameters(doc),
            "common_questions": extract_faq(doc),
            "examples": extract_examples(doc)
        },
        "detailed_guide": {
            "step_by_step": extract_steps(doc),
            "screenshots": extract_visual_guides(doc),
            "advanced_tips": extract_tips(doc)
        }
    }
```

### æ­¥éª¤2ï¼šLLMæç‚¼å…³é”®ä¿¡æ¯

ä½¿ç”¨LLMå¯¹æ¯ä¸ªæ–‡æ¡£è¿›è¡Œ**æ™ºèƒ½æç‚¼**ï¼š

```python
# æç‚¼æç¤ºè¯
EXTRACTION_PROMPT = """
è¯·å¯¹ä»¥ä¸‹æ–‡æ¡£è¿›è¡Œç»“æ„åŒ–æç‚¼ï¼Œè¾“å‡ºJSONæ ¼å¼ï¼š

æ–‡æ¡£å†…å®¹ï¼š
{document_content}

è¯·æå–ï¼š
1. æ ¸å¿ƒæ¦‚å¿µå®šä¹‰ï¼ˆä¸€å¥è¯ï¼‰
2. ä¸»è¦åŠŸèƒ½ï¼ˆ3-5ä¸ªè¦ç‚¹ï¼‰
3. ä½¿ç”¨åœºæ™¯ï¼ˆ2-3ä¸ªå…¸å‹åœºæ™¯ï¼‰
4. å…³é”®å‚æ•°ï¼ˆè¡¨æ ¼æ ¼å¼ï¼‰
5. å¸¸è§é—®é¢˜ï¼ˆ3-5ä¸ªQ&Aï¼‰
6. ä¸å…¶ä»–æ¦‚å¿µçš„å…³ç³»ï¼ˆåˆ—è¡¨ï¼‰
7. å¿«é€Ÿå¼€å§‹æ­¥éª¤ï¼ˆ3-5æ­¥ï¼‰

è¾“å‡ºæ ¼å¼ï¼š
{
  "definition": "...",
  "functions": ["...", "..."],
  "use_cases": ["...", "..."],
  "parameters": [{"name": "...", "type": "...", "description": "..."}],
  "faq": [{"question": "...", "answer": "..."}],
  "related_concepts": ["...", "..."],
  "quick_start": ["...", "..."]
}
"""
```

### æ­¥éª¤3ï¼šç”Ÿæˆå¢å¼ºç´¢å¼•

ä¸ºæ¯ä¸ªæ–‡æ¡£ç”Ÿæˆ**å¤šç»´åº¦çš„ç´¢å¼•**ï¼š

```json
{
  "doc_id": "mh0ucw9e76f6",
  "title": "èƒ½åŠ›å•å…ƒ",
  "indexes": {
    "semantic": {
      "primary_keywords": ["èƒ½åŠ›å•å…ƒ", "é¢„å®šä¹‰èƒ½åŠ›", "èƒ½åŠ›æ•°æ®"],
      "related_keywords": ["æ”»å‡»", "ç‰¹æ•ˆ", "çŠ¶æ€", "èŠ‚ç‚¹å›¾"],
      "question_patterns": [
        "æ€æ ·å®šä¹‰æ”»å‡»æ•ˆæœ",
        "èƒ½åŠ›å•å…ƒæœ‰å“ªäº›ç±»å‹",
        "æ€æ ·åœ¨èŠ‚ç‚¹å›¾ä¸­è°ƒç”¨èƒ½åŠ›å•å…ƒ"
      ]
    },
    "structural": {
      "concept_type": "core_system",
      "difficulty_level": "intermediate",
      "prerequisites": ["èŠ‚ç‚¹å›¾åŸºç¡€æ¦‚å¿µ", "å•ä½æ¦‚å¿µ"],
      "dependent_concepts": ["å‘½ä¸­æ£€æµ‹", "æœ¬åœ°æŠ•å°„ç‰©", "èŠ‚ç‚¹å›¾"]
    },
    "task_mapping": {
      "tasks": [
        "create_attacking_character",
        "create_projectile_weapon",
        "create_buff_system"
      ]
    }
  }
}
```

---

## å‘é‡æ£€ç´¢ä¼˜åŒ–

### ä¼˜åŒ–ç­–ç•¥1ï¼šæ··åˆæ£€ç´¢ï¼ˆHybrid Retrievalï¼‰

ä¸ä»…ä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦ï¼Œè¿˜ç»“åˆ**å…³é”®è¯åŒ¹é…**å’Œ**ç»“æ„åŒ–æŸ¥è¯¢**ï¼š

```python
def hybrid_retrieve(query, top_k=5):
    # 1. å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢
    vector_results = vector_db.search(query, top_k=10)
    
    # 2. å…³é”®è¯åŒ¹é…æ£€ç´¢
    keyword_results = keyword_index.search(query, top_k=10)
    
    # 3. ä»»åŠ¡æµç¨‹åŒ¹é…
    task_results = task_graph.find_relevant_tasks(query, top_k=5)
    
    # 4. èåˆæ’åº
    merged = merge_and_rank(
        vector_results,
        keyword_results,
        task_results,
        weights={
            'vector': 0.4,
            'keyword': 0.3,
            'task': 0.3
        }
    )
    
    return merged[:top_k]
```

### ä¼˜åŒ–ç­–ç•¥2ï¼šæŸ¥è¯¢ç†è§£ä¸æ‰©å±•

åœ¨æ£€ç´¢å‰å¯¹ç”¨æˆ·æŸ¥è¯¢è¿›è¡Œ**ç†è§£å’Œæ‰©å±•**ï¼š

```python
def understand_and_expand_query(user_query):
    # 1. è¯†åˆ«æŸ¥è¯¢æ„å›¾
    intent = classify_intent(user_query)
    # å¯èƒ½çš„æ„å›¾ï¼šhow-to, what-is, troubleshoot, compare
    
    # 2. æå–å…³é”®æ¦‚å¿µ
    concepts = extract_concepts(user_query)
    
    # 3. æŸ¥è¯¢æ‰©å±•
    expanded_queries = [
        user_query,  # åŸå§‹æŸ¥è¯¢
        f"æ€æ ·{user_query}",  # è½¬æ¢ä¸ºhow-to
        f"{user_query}çš„æ­¥éª¤",  # è½¬æ¢ä¸ºæ­¥éª¤
        f"{user_query}çš„å‚æ•°",  # è½¬æ¢ä¸ºå‚æ•°
    ]
    
    # 4. æŸ¥æ‰¾ç›¸å…³ä»»åŠ¡æµç¨‹
    related_tasks = task_graph.find_related_tasks(concepts)
    
    return {
        'intent': intent,
        'concepts': concepts,
        'expanded_queries': expanded_queries,
        'related_tasks': related_tasks
    }
```

### ä¼˜åŒ–ç­–ç•¥3ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ç»“æœæ’åº

æ ¹æ®**ç”¨æˆ·çš„çŸ¥è¯†æ°´å¹³å’Œä¸Šä¸‹æ–‡**é‡æ–°æ’åºç»“æœï¼š

```python
def context_aware_ranking(results, user_context):
    """
    user_context = {
        'skill_level': 'beginner|intermediate|advanced',
        'previous_queries': [...],
        'current_task': 'create_attacking_character',
        'learning_path': [...]
    }
    """
    
    ranked = []
    for result in results:
        score = result.relevance_score
        
        # 1. éš¾åº¦åŒ¹é…åŠ åˆ†
        if result.difficulty == user_context['skill_level']:
            score += 0.2
        
        # 2. ä»»åŠ¡ç›¸å…³æ€§åŠ åˆ†
        if result.task_id == user_context['current_task']:
            score += 0.3
        
        # 3. å­¦ä¹ è·¯å¾„è¿è´¯æ€§åŠ åˆ†
        if result.id in user_context['learning_path']:
            score += 0.1
        
        # 4. å‰ç½®çŸ¥è¯†æ£€æŸ¥
        if all(prereq in user_context['known_concepts'] 
               for prereq in result.prerequisites):
            score += 0.15
        
        ranked.append((result, score))
    
    return sorted(ranked, key=lambda x: x[1], reverse=True)
```

### ä¼˜åŒ–ç­–ç•¥4ï¼šå¤šæ­¥éª¤æ¨ç†

å¯¹å¤æ‚é—®é¢˜è¿›è¡Œ**å¤šæ­¥éª¤æ¨ç†**ï¼š

```python
def multi_step_reasoning(query):
    """
    ä¾‹å¦‚ï¼šç”¨æˆ·é—®"æ€æ ·åˆ¶ä½œä¸€ä¸ªä¼šè¿½å‡»æ•Œäººçš„è§’è‰²"
    
    æ­¥éª¤1ï¼šåˆ†è§£é—®é¢˜
    - ä¸»è¦ä»»åŠ¡ï¼šåˆ¶ä½œè§’è‰²
    - å­ä»»åŠ¡ï¼šæ·»åŠ è¿½å‡»é€»è¾‘
    
    æ­¥éª¤2ï¼šæŸ¥æ‰¾ç›¸å…³æ–‡æ¡£
    - è§’è‰²åŸºç¡€
    - èŠ‚ç‚¹å›¾é€»è¾‘
    - ä»‡æ¨é…ç½®ï¼ˆè¿½å‡»ç›¸å…³ï¼‰
    
    æ­¥éª¤3ï¼šç»„ç»‡ç­”æ¡ˆ
    - å…ˆè®²åŸºç¡€
    - å†è®²é€»è¾‘
    - æœ€åè®²é«˜çº§æŠ€å·§
    """
    
    # 1. é—®é¢˜åˆ†è§£
    main_task, sub_tasks = decompose_query(query)
    
    # 2. åˆ†åˆ«æ£€ç´¢
    main_docs = retrieve_for_task(main_task)
    sub_docs = [retrieve_for_task(task) for task in sub_tasks]
    
    # 3. æŒ‰é€»è¾‘é¡ºåºç»„ç»‡
    organized = organize_by_learning_path(main_docs, sub_docs)
    
    return organized
```

---

## å®ç°è·¯çº¿å›¾

### Phase 1: çŸ¥è¯†åº“é‡ç»„ï¼ˆ1-2å‘¨ï¼‰

#### ä»»åŠ¡1.1ï¼šå»ºç«‹ä»»åŠ¡æµç¨‹åº“
- [ ] åˆ†æ170+ä¸ªæ–‡æ¡£ï¼Œè¯†åˆ«20-30ä¸ªå¸¸è§ä»»åŠ¡
- [ ] ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºæµç¨‹å®šä¹‰ï¼ˆJSONæ ¼å¼ï¼‰
- [ ] å»ºç«‹ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»å›¾

**è¾“å‡º**ï¼š`knowledge/tasks/task_definitions.json`

#### ä»»åŠ¡1.2ï¼šå»ºç«‹æ¦‚å¿µå…³ç³»å›¾
- [ ] ä¸ºæ¯ä¸ªæ–‡æ¡£æ ‡è®°æ‰€å±æ¦‚å¿µ
- [ ] å»ºç«‹æ¦‚å¿µé—´çš„å…³ç³»ï¼ˆå‰ç½®ã€ä¾èµ–ã€ç›¸å…³ï¼‰
- [ ] ç”Ÿæˆæ¦‚å¿µå…³ç³»å›¾å¯è§†åŒ–

**è¾“å‡º**ï¼š`knowledge/concepts/concept_graph.json`

#### ä»»åŠ¡1.3ï¼šåˆ›å»ºå¿«é€ŸæŸ¥è¯¢è¡¨
- [ ] ä¸ºæ¯ä¸ªæ–‡æ¡£ç”Ÿæˆç»“æ„åŒ–çš„å¿«é€ŸæŸ¥è¯¢è¡¨
- [ ] æå–å‚æ•°è¡¨ã€å¸¸è§é—®é¢˜ã€ä½¿ç”¨åœºæ™¯
- [ ] ç”ŸæˆMarkdownæ ¼å¼çš„å¿«é€Ÿå‚è€ƒ

**è¾“å‡º**ï¼š`knowledge/quick_reference/`

### Phase 2: æ–‡æ¡£é¢„å¤„ç†ï¼ˆ2-3å‘¨ï¼‰

#### ä»»åŠ¡2.1ï¼šå¼€å‘æç‚¼å·¥å…·
- [ ] ç¼–å†™LLMæç‚¼è„šæœ¬
- [ ] å®šä¹‰æç‚¼æç¤ºè¯æ¨¡æ¿
- [ ] æµ‹è¯•æç‚¼è´¨é‡

**è¾“å‡º**ï¼š`knowledge/cleaner/llm_extractor.py`

#### ä»»åŠ¡2.2ï¼šæ‰¹é‡æç‚¼æ–‡æ¡£
- [ ] å¯¹æ‰€æœ‰170+ä¸ªæ–‡æ¡£è¿›è¡Œæç‚¼
- [ ] ç”Ÿæˆç»“æ„åŒ–çš„æç‚¼ç»“æœ
- [ ] äººå·¥å®¡æ ¸å’Œä¿®æ­£

**è¾“å‡º**ï¼š`knowledge/processed/extracted_concepts.json`

#### ä»»åŠ¡2.3ï¼šç”Ÿæˆå¢å¼ºç´¢å¼•
- [ ] ä¸ºæ¯ä¸ªæ–‡æ¡£ç”Ÿæˆå¤šç»´åº¦ç´¢å¼•
- [ ] åŒ…æ‹¬è¯­ä¹‰ç´¢å¼•ã€ç»“æ„ç´¢å¼•ã€ä»»åŠ¡æ˜ å°„
- [ ] æ„å»ºç´¢å¼•æ•°æ®åº“

**è¾“å‡º**ï¼š`knowledge/indexes/enhanced_index.json`

### Phase 3: å‘é‡æ£€ç´¢ä¼˜åŒ–ï¼ˆ2-3å‘¨ï¼‰

#### ä»»åŠ¡3.1ï¼šå®ç°æ··åˆæ£€ç´¢
- [ ] é›†æˆå‘é‡æ£€ç´¢ï¼ˆChromaDBï¼‰
- [ ] å®ç°å…³é”®è¯æ£€ç´¢ï¼ˆBM25æˆ–Elasticsearchï¼‰
- [ ] å®ç°ä»»åŠ¡æµç¨‹æ£€ç´¢
- [ ] èåˆæ’åºç®—æ³•

**è¾“å‡º**ï¼š`knowledge/rag_v2/hybrid_retriever.py`

#### ä»»åŠ¡3.2ï¼šå®ç°æŸ¥è¯¢ç†è§£
- [ ] å¼€å‘æ„å›¾åˆ†ç±»å™¨
- [ ] å¼€å‘æ¦‚å¿µæå–å™¨
- [ ] å¼€å‘æŸ¥è¯¢æ‰©å±•å™¨
- [ ] é›†æˆåˆ°æ£€ç´¢æµç¨‹

**è¾“å‡º**ï¼š`knowledge/rag_v2/query_understanding.py`

#### ä»»åŠ¡3.3ï¼šå®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ’åº
- [ ] è®¾è®¡ç”¨æˆ·ä¸Šä¸‹æ–‡æ¨¡å‹
- [ ] å®ç°éš¾åº¦åŒ¹é…ç®—æ³•
- [ ] å®ç°å­¦ä¹ è·¯å¾„è¿è´¯æ€§ç®—æ³•
- [ ] é›†æˆåˆ°æ’åºæµç¨‹

**è¾“å‡º**ï¼š`knowledge/rag_v2/context_aware_ranker.py`

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

#### ä»»åŠ¡4.1ï¼šæ„å»ºæµ‹è¯•é›†
- [ ] æ”¶é›†50-100ä¸ªçœŸå®ç”¨æˆ·é—®é¢˜
- [ ] ä¸ºæ¯ä¸ªé—®é¢˜æ ‡æ³¨æ­£ç¡®ç­”æ¡ˆ
- [ ] åˆ†ç±»é—®é¢˜ç±»å‹

**è¾“å‡º**ï¼š`knowledge/tests/test_queries.json`

#### ä»»åŠ¡4.2ï¼šè¯„ä¼°å’Œä¼˜åŒ–
- [ ] æµ‹è¯•æ£€ç´¢å‡†ç¡®ç‡ï¼ˆPrecision@5, Recall@10ï¼‰
- [ ] æµ‹è¯•ç­”æ¡ˆè´¨é‡
- [ ] è¿­ä»£ä¼˜åŒ–å‚æ•°

**è¾“å‡º**ï¼š`knowledge/tests/evaluation_report.md`

#### ä»»åŠ¡4.3ï¼šéƒ¨ç½²å’Œç›‘æ§
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] å»ºç«‹ç›‘æ§å’Œåé¦ˆæœºåˆ¶
- [ ] æŒç»­æ”¹è¿›

---

## æ–‡ä»¶ç»“æ„è§„åˆ’

```
knowledge/
â”œâ”€â”€ KNOWLEDGE_ARCHITECTURE.md          # æœ¬æ–‡æ¡£
â”œâ”€â”€ tasks/                             # ä»»åŠ¡æµç¨‹åº“
â”‚   â”œâ”€â”€ task_definitions.json          # ä»»åŠ¡å®šä¹‰
â”‚   â”œâ”€â”€ task_graph.json                # ä»»åŠ¡ä¾èµ–å›¾
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ concepts/                          # æ¦‚å¿µåº“
â”‚   â”œâ”€â”€ concept_graph.json             # æ¦‚å¿µå…³ç³»å›¾
â”‚   â”œâ”€â”€ concept_definitions.json       # æ¦‚å¿µå®šä¹‰
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ quick_reference/                   # å¿«é€ŸæŸ¥è¯¢è¡¨
â”‚   â”œâ”€â”€ *.md                           # æ¯ä¸ªæ¦‚å¿µçš„å¿«é€Ÿå‚è€ƒ
â”‚   â””â”€â”€ index.json
â”œâ”€â”€ processed/                         # å¤„ç†åçš„æ–‡æ¡£
â”‚   â”œâ”€â”€ extracted_concepts.json        # æç‚¼çš„æ¦‚å¿µ
â”‚   â”œâ”€â”€ enhanced_documents.json        # å¢å¼ºçš„æ–‡æ¡£
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ indexes/                           # ç´¢å¼•åº“
â”‚   â”œâ”€â”€ enhanced_index.json            # å¤šç»´åº¦ç´¢å¼•
â”‚   â”œâ”€â”€ keyword_index.json             # å…³é”®è¯ç´¢å¼•
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ rag_v2/                            # ä¼˜åŒ–çš„RAGæ¨¡å—
â”‚   â”œâ”€â”€ hybrid_retriever.py            # æ··åˆæ£€ç´¢
â”‚   â”œâ”€â”€ query_understanding.py         # æŸ¥è¯¢ç†è§£
â”‚   â”œâ”€â”€ context_aware_ranker.py        # ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ’åº
â”‚   â”œâ”€â”€ multi_step_reasoner.py         # å¤šæ­¥éª¤æ¨ç†
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ tests/                             # æµ‹è¯•
â”‚   â”œâ”€â”€ test_queries.json              # æµ‹è¯•é—®é¢˜é›†
â”‚   â”œâ”€â”€ evaluation_report.md           # è¯„ä¼°æŠ¥å‘Š
â”‚   â””â”€â”€ test_runner.py
â””â”€â”€ guide/                             # åŸå§‹æ–‡æ¡£ï¼ˆä¿æŒä¸å˜ï¼‰
    â””â”€â”€ *.md
```

---

## å…³é”®æŒ‡æ ‡

### æ£€ç´¢è´¨é‡æŒ‡æ ‡
- **Precision@5**: å‰5ä¸ªç»“æœä¸­æœ‰å¤šå°‘æ˜¯ç›¸å…³çš„
- **Recall@10**: æ‰€æœ‰ç›¸å…³æ–‡æ¡£ä¸­æœ‰å¤šå°‘è¢«æ£€ç´¢åˆ°
- **MRR (Mean Reciprocal Rank)**: ç¬¬ä¸€ä¸ªç›¸å…³ç»“æœçš„å¹³å‡æ’åå€’æ•°
- **NDCG (Normalized Discounted Cumulative Gain)**: è€ƒè™‘æ’åºçš„ç»¼åˆæŒ‡æ ‡

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- **é¦–æ¬¡æŸ¥è¯¢æˆåŠŸç‡**: ç”¨æˆ·ç¬¬ä¸€æ¬¡æŸ¥è¯¢å°±æ‰¾åˆ°ç­”æ¡ˆçš„æ¯”ä¾‹
- **å¹³å‡æŸ¥è¯¢æ­¥æ•°**: ç”¨æˆ·éœ€è¦å¤šå°‘æ¬¡æŸ¥è¯¢æ‰èƒ½è§£å†³é—®é¢˜
- **ç”¨æˆ·æ»¡æ„åº¦**: ç”¨æˆ·å¯¹ç­”æ¡ˆçš„æ»¡æ„åº¦è¯„åˆ†

### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **æ£€ç´¢å»¶è¿Ÿ**: P95å»¶è¿Ÿ < 500ms
- **ååé‡**: æ”¯æŒçš„å¹¶å‘æŸ¥è¯¢æ•°
- **ç´¢å¼•å¤§å°**: æ€»ç´¢å¼•å¤§å°

---

## å¿«é€Ÿå¼€å§‹

### ç«‹å³å¯åšçš„äº‹æƒ…

1. **åˆ†æç°æœ‰æ–‡æ¡£**
   ```bash
   # ç»Ÿè®¡æ–‡æ¡£æ•°é‡å’Œåˆ†ç±»
   ls -la knowledge/guide/*.md | wc -l
   ```

2. **åˆ›å»ºä»»åŠ¡æµç¨‹å®šä¹‰**
   - æ‰‹åŠ¨åˆ—å‡º20-30ä¸ªå¸¸è§ä»»åŠ¡
   - ä¸ºæ¯ä¸ªä»»åŠ¡æ ‡è®°æ‰€éœ€çš„æ–‡æ¡£

3. **ç”Ÿæˆå¿«é€ŸæŸ¥è¯¢è¡¨**
   - ä¸º5-10ä¸ªæ ¸å¿ƒæ¦‚å¿µæ‰‹åŠ¨åˆ›å»ºå¿«é€Ÿå‚è€ƒ
   - æµ‹è¯•æ•ˆæœ

4. **å»ºç«‹åŸºç¡€ç´¢å¼•**
   - ä¸ºæ¯ä¸ªæ–‡æ¡£æ·»åŠ å…ƒæ•°æ®æ ‡ç­¾
   - å»ºç«‹ç®€å•çš„å…³é”®è¯ç´¢å¼•

### é¢„æœŸæ•ˆæœ

å®æ–½æœ¬æ–¹æ¡ˆåï¼ŒRAGæ£€ç´¢æ•ˆæœåº”è¯¥æå‡ï¼š

- **æŸ¥è¯¢ç†è§£å‡†ç¡®ç‡**: ä»50% â†’ 85%+
- **æ£€ç´¢ç›¸å…³æ€§**: ä»60% â†’ 90%+
- **ç”¨æˆ·æ»¡æ„åº¦**: ä»40% â†’ 80%+
- **é¦–æ¬¡æˆåŠŸç‡**: ä»30% â†’ 70%+

---

## å‚è€ƒèµ„æº

- [LlamaIndex æ–‡æ¡£](https://docs.llamaindex.ai/)
- [ChromaDB æ–‡æ¡£](https://docs.trychroma.com/)
- [RAG æœ€ä½³å®è·µ](https://arxiv.org/abs/2312.10997)
- [çŸ¥è¯†å›¾è°±æ„å»º](https://en.wikipedia.org/wiki/Knowledge_graph)
